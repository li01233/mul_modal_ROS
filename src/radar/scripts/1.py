import socket
import struct

from quantum_report import QuantumReport

data = "0200280001000000031e0000000014004b0301010302014101280000010001410128010000000141012800000000015a01320100000000012c00000109000141013201000000014b013201000000014b013201000000015a0132010000000001a4000001fe000000e8030000eb0aeb0a00000000f4010000dc0500000807080700000000000000000000000000000000000000001f0000003f0000007d000000fa00000077010000f4010000ee020000e8030000dc050000d0070000b80b0000a00f000070170000401f0000e02e0000803e0000c05d0000007d000080bb000000fa0000fe000000e8030000eb0aeb0a00000000f4010000dc0500000807080700000000"
byte_data = bytes.fromhex(data)
last_frame_id=struct.unpack('<I', byte_data[:4])[0] # read first 4 bytes
print(last_frame_id)
if last_frame_id == 0x00280002:
    bl = QuantumReport.parse_report(byte_data[:260])
    qr = QuantumReport(*bl)
    range_index = qr.range_index
    print(range_index)
    
